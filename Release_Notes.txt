XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX
obsproc_prep release 3.0.0 --> released ??? ?, 2014

files:
 *obsproc_prep/fix/prepobs_cqc_statbge
 *obsproc_prep/fix/prepobs_landc
 *obsproc_prep/fix/prepobs_prep.bufrtable
 *obsproc_prep/fix/syndat_syndata.slmask.t126.gaussian
 *obsproc_prep/fix/syndat_weight
&*obsproc_prep/sorc/prepobs_cqcbufr.fd/cqcbufr.f
&*obsproc_prep/sorc/prepobs_cqcbufr.fd/makefile
&*obsproc_prep/sorc/prepobs_cqcbufr.fd/radcor.f
&*obsproc_prep/sorc/prepobs_cqcvad.fd/cqcvad.f
&*obsproc_prep/sorc/prepobs_cqcvad.fd/makefile
&*obsproc_prep/sorc/prepobs_listheaders.fd/listheaders.f90
&*obsproc_prep/sorc/prepobs_listheaders.fd/makefile
&*obsproc_prep/sorc/prepobs_monoprepbufr.fd/makefile
&*obsproc_prep/sorc/prepobs_monoprepbufr.fd/monoprepbufr.f90
&*obsproc_prep/sorc/prepobs_mpcopybufr.fd/makefile
&*obsproc_prep/sorc/prepobs_mpcopybufr.fd/mpcopybufr.f90
&*obsproc_prep/sorc/prepobs_oiqcbufr.fd/makefile
&*obsproc_prep/sorc/prepobs_oiqcbufr.fd/oiqcbufr.f
&*obsproc_prep/sorc/prepobs_prepacpf.fd/makefile
&*obsproc_prep/sorc/prepobs_prepacpf.fd/prepacpf.f
&*obsproc_prep/sorc/prepobs_prepacqc.fd/acftobs_qc.f
&*obsproc_prep/sorc/prepobs_prepacqc.fd/indexc40.f
&*obsproc_prep/sorc/prepobs_prepacqc.fd/input_acqc.f
&*obsproc_prep/sorc/prepobs_prepacqc.fd/makefile
&*obsproc_prep/sorc/prepobs_prepacqc.fd/output_acqc_noprof.f
&*obsproc_prep/sorc/prepobs_prepacqc.fd/output_acqc_prof.f
&*obsproc_prep/sorc/prepobs_prepacqc.fd/prepacqc.f
&*obsproc_prep/sorc/prepobs_prepacqc.fd/sub2mem_mer.f
&*obsproc_prep/sorc/prepobs_prepacqc.fd/sub2mem_um.f
&*obsproc_prep/sorc/prepobs_prepacqc.fd/tranQCflags.f
 *obsproc_prep/sorc/prepobs_prepdata.fd/iw3unpbf.f
 *obsproc_prep/sorc/prepobs_prepdata.fd/makefile
 *obsproc_prep/sorc/prepobs_prepdata.fd/prepdata.f
 *obsproc_prep/sorc/prepobs_prepdata.fd/w3atovsunp.f
 *obsproc_prep/sorc/prepobs_prepdata.fd/w3cnvxtovs.f
 *obsproc_prep/sorc/prepobs_prepdata.fd/w3rtovsunp.f
 *obsproc_prep/sorc/prepobs_prepdata.fd/w3unpkb7.f
 *obsproc_prep/sorc/prepobs_prepdata.fd/w3tovseds.f
 *obsproc_prep/sorc/prepobs_prepdata.fd/w3tovsmnd.f
 *obsproc_prep/sorc/prepobs_prepdata.fd/wordlength.f
&*obsproc_prep/sorc/prepobs_prevents.fd/gblevents_cdas.f
&*obsproc_prep/sorc/prepobs_prevents.fd/makefile
&*obsproc_prep/sorc/prepobs_prevents.fd/prevents.f
&*obsproc_prep/sorc/prepobs_profcqc.fd/makefile
&*obsproc_prep/sorc/prepobs_profcqc.fd/profcqc.f
&*obsproc_prep/sorc/syndat_syndata.fd/makefile
&*obsproc_prep/sorc/syndat_syndata.fd/syndata.f
&*obsproc_prep/sorc/build.sh
&*obsproc_prep/sorc/clean.sh
&*obsproc_prep/sorc/install.sh
&*obsproc_prep/sorc/load_libs.rc
&*obsproc_prep/sorc/README.build
&*obsproc_prep/sorc/setlibs.rc
&*obsproc_prep/ush/prepobs_cqcbufr.sh
&*obsproc_prep/ush/prepobs_cqcvad.sh
&*obsproc_prep/ush/prepobs_makeprepbufr.sh
&*obsproc_prep/ush/prepobs_oiqcbufr.sh
&*obsproc_prep/ush/prepobs_prepacqc.sh
&*obsproc_prep/ush/prepobs_prevents.sh
&*obsproc_prep/ush/prepobs_profcqc.sh
&*obsproc_prep/ush/prepobs_syndata.sh

( * - changed)


 USH script changes:
   prepobs_makeprepbufr.sh:
    - Imports new environment variable $HOMEobsproc_prep which points to
      directory path for generic prep subdirectories under version control (in
      production this is normally /nwprod/obsproc_prep.vX.Y.Z where X.Y.Z
      version number being used, usually the latest).  This replaces
      /nw${envir}.
    - Imports new environment variable $HOMEobsproc_network which points to
      directory path for network-specific prep subdirectories under version
      control (in production this is normally /nwprod/obsproc_NETWORK.vX.Y.Z
      where NETWORK is, e.g., global, nam, rap, rtma, urma, and X.Y.Z is
      version number being used, usually the latest).  This replaces
      /nw${envir}.
    - Removed all references to RUC network (obsolete).
    - Removed all references to CDC network (obsolete).
    - Added references to URMA network.
    - Removed option to run on MACHINE=sgi - this is obsolete (as a result
      variables $MACHINE and $HOMEALL are no longer used in this script).
    - Replaced variable $EXECUTIL with $utilexec for directory path to utility
      program ndate (both were exported from job scripts with same value,
      $EXECUTIL has now been removed from all parent PREP job scripts).
   prepobs_syndata.sh:
    - Modified export variable FORT14 to point to renamed fix file:
      syndat_syndata.slmask.t126.gaussian 
   prepobs_prevents.sh
    - Removed all references to CDC network (obsolete).
    - Added references to URMA network.
   prepobs_cqcbufr.sh, prepobs_cqcvad.sh, prepobs_oiqcbufr.sh,
   prepobs_prepacqc.sh, prepobs_profcqc.sh: 
    - No changes; initial population of vertical structure. 
      
 Source code changes:
   build.sh in sorc directory:
    - New. Used to build one or all executables in the *.fd sub-directories of
      the sorc directory.  Reads either load_libs.rc or setlibs.rc file to
      point to library version numbers needed by makefiles.
   clean.sh in sorc directory:
    - New. Used to "make clean" one or more *.fd sub-directories in the sorc
      directory (generally after a build).
   install.sh in sorc directory:
    - New. Used to install (move) one or more executables (after build) in exec
      directory (assumed to be in same root directory as sorc).
   load_libs.rc in sorc directory:
    - New. Read by build.sh - contains library version numbers needed by
      makefiles.  (Not read if setlibs.rc is read.)
   README.build in sorc directory:
    - New. Documentation on using build.sh and install.sh.
   setlibs.rc in sorc directory:
    - New. Read by build.sh - contains library version numbers needed by
      makefiles.  (Not read if load_libs.rc is read.)
   prepobs_cqcbufr, prepobs_cqcvad, prepobs_listheaders, prepobs_monoprepbufr,
   prepobs_mpcopybufr, prepobs_oiqcbufr, prepobs_prepacpf, prepobs_prepacqc,
   prepobs_prepdata, prepobs_prevents, prepobs_profcqc, syndat_syndata:
    - Makefile modified to use environment variables to point to library
      version numbers and to add sample build script and info in sorc
      directory.  This generalizes the library version information.
   prepobs_cqcbufr, prepobs_listheaders, prepobs_monoprepbufr,
   prepobs_mpcopybufr, prepobs_oiqcbufr, prepobs_prepacpf, prepobs_prevents,
   prepobs_profcqc, syndat_syndata:
    - No change to source.
   prepobs_cqcvad:
    - Increased total number of levels amongst all VAD reports that can be
      processed and total number of events amongst all VAD reports that can be
      processed from 160000 to 500000.
      BENEFIT: This increase will accommodate both legacy and Level 2 format
               VAD wind data.
    - Generated a new dynamic variable "icntmx" (product of number of stations
      reporting (max=200), number of reporting times in the dataset time span 
      (max=6), and the number of data type increments (max=3, but more
      realistically 2, u and v)) to allocate the upper limit of a multi-nested
      DO loop in subroutines INCDIST and RESIDST.  The static limit of 1000
      was occasionally being exceeded.
      BENEFIT: This change does not affect the output prepbufr file but it
               does improve the statistical evaluation of legacy and Level 2
               VAD wind data.
   prepobs_prepacqc:
    - In final subroutine which copies all BUFR messages from input to output
      PREPBUFR file (including aircraft reports undated by this program), moved
      BUFRLIB routine OPENMB call to after time-window and geographic-domain
      checks to prevent creation of an empty, but open, BUFR message (of type
      AIRCAR) in (rare) cases where absolutely no aircraft reports pass these
      checks
      BENEFIT: Prevents a BUFRLIB abort due to previous message being open
               when attempting to copy first non-aircraft message from input to
               output PREPBUFR file in such cases where no aircraft reports are
               written back out.  This occurred in the 07z 20140214 RAP_PREP
               production run when the number of aircraft reports was severely
               reduced due to a fiber cut and no reports survived the time-
               window check.
   prepobs_prepdata:
    prepdata:
    - Adjusted FWINDO, JSURFM,  JSURFW, and npkrpt  from 11 elements to 12.
      Added twelfth element to sfc ob type array. Set ITYP=12 for Coast Guard
      tide gauge, adjusted RECCO to ITYP=13, and adjusted OTHER to be ITYP=30.
      Updated JTYPE to include the new dump report type 534 for Coast Guard 
      tide gauge data and to adjust OTHER from 13 to 30.  In subroutine ISSEL
      adjusted I=13 to I=30 and adjusted all I=12  statements to I=13.
      BENEFIT: Now Coast Guard tide gauge reports are available to be encoded
               into the prepbufr file for all networks that process the SFCSHP
               dump file.
    - Added 'npkrpt' and 'ipstnflg.'  Increased number of possible mass and
      wind report types from 72 to 74.  Added report types 292-295 to JITSW
      and added their descriptive names to NAMEW and NAMEM.  Moved PFRALT_save
      above mesonet conditional in sfcdta subroutine. Added initialization of
      ipstnflg=0 prior to unpacking each report with UNPREPBF.  Added logic to
      set ipstnflg=1 for the three following cases: 1) npkrpt=.true. for atlas
      buoys, 2) npkrpt=.true. for mesonets (and set pressure and moisture 
      quality marks to 3), and 3) npkrpt=.true. for all other surface data
      types (and retain temperature, estimate station pressure, and set 
      pressure and moisture quality marks to 3). Added logic to force moisture
      quality mark to a minimum of 3 for prepbufr report type 183 (pstn is
      estimated).  Added logic to reset moisture quality mark when ipstnflg=0 
      for all surface data types.  Added logic to assign new prepbufr report
      types 192-195 and 292-295 based on dump type and if ipstnflg=1 for
      surface data.  Updated KTYP in subroutine W3FIZZ to define the data type 
      assigned to new prepbufr report types 192-195 and 292-295.  Added logic
      to handle storage of station pressure based on whether or not ipstnflg=0.
      BENEFIT: ADPSFC, SFCSHP, and MSONET reports that do not contain station
               pressure information are now retained (previously, they were
               discarded).
    - Updated OBSSTR2(9,3) to hold PMIN rather than NUL.  Updated 
      OBSSTR2(10,3) to hold PMIN rather than NUL.  Added statement to save
      PMIN=0 in ob2 array.
      BENEFIT: More complete and thorough pressure information for surface
               data is available by deriving mean sea level pressure when 
               adequate environmental information is available for networks
               RTMA and URMA.  A majority of changes for this new feature are
               in w3emc libs code, gblevents.f
    - Modified subroutine GETC06 to skip over prepbufr encoding if U- or
      V-comp of wind exceeds 32767 (a bufr bit limitation).
      BENEFIT: erroneously large upper-air wind reports will no longer be 
               encoded into the prepbufr file.
    - Subtype is set to 2 for Level 2 format VADWND data.  Logic is set up to
      not apply a factor to the U- and V- component of the wind and to not
      convert the data to U- and V- components since the data is natively in
      that format.
      BENEFIT: Level 2 format VADWND data can now be processed and encoded
               into the prepbufr file.
    - Added logic to retain wind information for any data type in SFCDTA 
      subroutine.  If speed is missing or direction is missing, set 
      IMSG_DIR=1.  If both speed and direction are missing, skip onto 
      surface dewpoint depression evaluation.  Added statements to store 
      wind speed and direction quality marks and obs in words 5 and 6 of 
      MOBS array for all surface data types.  Added statement to store wind
      direction ob in word 5 of mobs array for all surface data types 
      (previously was only stored for metars).  Updated OBSSTR1(9,10) to
      hold DDO rather than NUL (adpsfc), OBSSTR1(10,11) to hold SOB rather
      than FFO (sfcshp), OBSSTR1(15,10 & 11) to hold DDO and SOB rather than
      NUL and NUL (msonet), QMSSTR(10,6) to hold SQM rather than NUL (sfcshp),
      and QMSSTR(15,6) to hold SQM rather than NUL (msonet).  Added statements
      to save wind direction and speed quality marks to qms5 and qms6 arrays.
      Added multiplication factor (for proper units) for obs(11,nlv) for 
      surface wind obs. 
      BENEFIT: Surface data reports that have incomplete wind direction or 
               speed information will now be retained so that any other
               observational data may be processed and encoded into the 
               prepbufr file. 
    iw3unpbf:
!!! DK only:
    - Added ability to read in and process percent confidence based on EUMETSAT
      Quality Indicator with and without forecast for NESDIS GOES winds pulled
      from NESDIS server (which originally stored them in dump file explicitly
      as "QIFY" and "QIFN" but later stored them both as before and as
      replicated "PCCF" values as with v10 BUFR, and even later stored them
      only as replicated "PCCF" values as with v10 BUFR) if they are present.
      (Note: As noted, will also work if these are stored in replicated "PCCF"
             values as with v10 BUFR, e.g., MODIS winds, AVHRR winds, JMA
             winds, EUMETSAT winds.)
    - Added ability to read in and process percent confidence based on NESDIS
      Recursive Filter Function for types which might store it in dump file in
      replicated "PCCF" values as with v10 BUFR (in this case NESDIS GOES
      winds, MODIS winds, AVHRR winds, JMA winds - already in place for
      EUMETSAT winds) if it is present.
      (Note: Will still work if this is stored explicitly as "RFFL" as
             originally with GOES winds pulled from NESDIS server.)
    - Added ability to read in and process percent confidence based on NESDIS
      Expected Error for types which might store it in dump file in replicated
      "PCCF" values as with v10 BUFR (in this case MODIS or AVHRR winds) if it
      is present.
      (Note: Will still work if this is stored explicitly as "EEQF" as
             originally with GOES winds pulled from NESDIS server.
    - Now stores cloud-top/deep-layer indicator in byte 3 of header reserve
      character word 1 for foreign-produced satellite winds (as already done
      for NESDIS-produced satellite winds) - JMA and EUMETSAT imager water
      vapor winds can now be of both types, before they were only cloud-top.
    - Output array OBS2 increased from length 42 to 43 words, where word 43
      contains satellite zenith angle (degrees, satwnd types only)
    - Added new dump report type 534 for surface marine Coast Guard tide gauge
      reports.
      BENEFIT: Now Coast Guard tide gauge reports are available to be encoded
               into the prepbufr file for all networks that process the SFCSHP
               dump file.

 Fixed file changes:
   prepobs_cqc_statbge, prepobs_landc, syndat_weight:
    - No changes to contents.
   prepobs_prep.bufrtable:
    - Added two new mnemonics to Table B: Satellite Zenith Angle (SAZA), Mean
      Sea-Level Indicator (PMIN) 
    - Added SAZA to the SATWND mnemonic sequence
    - Added <WSPD_SEQ> to SFCSHP mnemonic sequence
    - Added <WSPD_SEQ> and <PMSL_SEQ> to MSONET mnemonic sequence
    - Added PMIN to PMSL_SEQ mnemonic sequence
    - Changed TSB (Report Subtype) bits from 10 to 14
    - Added SAZA and PMIN particulars (scale, reference, bit, units)
    BENEFIT: The above noted changes will allow for wind speed (SOB) and wind
             direction (DDO) to be encoded into prepbufr reports, allow for  
             the derivation of mean sea-level pressure for RTMA and URMA,
             and encode satellite zenith angle into a prepbufr file for all
             SATWND types for use by GSI.
   syndat_syndata.slmask.t126.gaussian:
    - Renamed from syndat_slmask.t126.gaussian to distinguish from file in
      /nwprod/tropcy_qc_reloc.v*/fix 
    - No changes to contents.


 Output changes:
 ---------------
!!! significant output changes


 Compute Resource Information:
 -----------------------------
!!!   No changes.


 Preimplementation Testing Requirements:
 ---------------------------------------
   There are no jobs in obsproc_prep.  All jobs executing this version of
   obsproc_prep will be part of the parallel-production test of the obsproc 
   phase 2 implementation.


 Dissemination:
 --------------
   See information about dissemination in the release notes for the obsproc
   networks executing this version of obsproc_prep.


 Special Instructions:
 ---------------------
   This must be implemented simultaneously with the implementations of
   obsproc_global.v2.0.0, obsproc_nam.v2.0.0, obsproc_rap.v2.0.0
   obsproc_rtma.v2.0.0, obsproc_urma.v2.0.0, and ??? (any others?)

   This must be implemented simultaneously with or immediately afterward the 
   w3emc_v2.2.0 implementation.

   Since there are no jobs in obsproc_prep, an obsproc_prep.ver file is not
   needed.

XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX
